[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"

[tool.pytest.ini_options]
testpaths = ["tests/"]

[tool.coverage.run]
source = ["vivarium"]

[tool.coverage.report]
show_missing = true

[tool.black]
line_length = 94
exclude = '''.*examples.*'''

[tool.isort]
line_length = 94
profile = "black"
multi_line_output = 3 # Vertical Hanging Indent, see https://pypi.org/project/isort/
skip_glob = ["*/examples/*", "**/examples/*"]

[tool.mypy]
# This is the global mypy configuration.
strict = true  # See all the enabled flags `mypy --help | grep -A 10 'Strict mode'`
disallow_any_unimported = false
exclude = [
    "build",
]
# ignore error codes (to allow for gradual typing)
# extract unique error codes thrown with `mypy . | grep -oP " [ \K[^\] ]+" | sort | uniq`
disable_error_code = [
    "arg-type",
    "assignment",
    "attr-defined",
    "call-arg",
    "call-overload",
    "comparison-overlap",
    "dict-item",
    "has-type",
    "import-untyped",
    "index",
    "list-item",
    "method-assign",
    "misc",
    "name-defined",
    "no-any-return",
    "no-redef",
    "no-untyped-call",
    "no-untyped-def",
    "operator",
    "override",
    "return-value",
    "type-arg",
    "type-var",
    "union-attr",
    "valid-type",
    "var-annotated",
]

# handle mypy errors when 3rd party packages are not typed.
[[tool.mypy.overrides]]
module = [
    # "scipy.*",
    # "sklearn.*",
]
ignore_missing_imports = true